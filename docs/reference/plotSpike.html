<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The function creates a lexical dispersion plot for large corpus objects based on keywords or dictionaries."><title>Lexical Dispersion Plot for Large Corpora of Texts — plotSpike • tenet</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Lexical Dispersion Plot for Large Corpora of Texts — plotSpike"><meta property="og:description" content="The function creates a lexical dispersion plot for large corpus objects based on keywords or dictionaries."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tenet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/tagging_texts.html">Computer-Assisted Text Tagging</a>
    <a class="dropdown-item" href="../articles/text_and_time.html">Text and Time</a>
    <a class="dropdown-item" href="../articles/text_as_network.html">Texts as Networks</a>
    <a class="dropdown-item" href="../articles/text_scanning.html">Scanning for Words and Themes</a>
    <a class="dropdown-item" href="../articles/thematic_coding.html">Tools for Thematic Coding</a>
    <a class="dropdown-item" href="../articles/visualizing_text.html">Visualizing Textual Data</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Lexical Dispersion Plot for Large Corpora of Texts</h1>
      
      <div class="d-none name"><code>plotSpike.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function creates a lexical dispersion plot for large corpus objects based on keywords or dictionaries.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plotSpike</span><span class="op">(</span>data<span class="op">=</span><span class="cn">NULL</span>, </span>
<span>          palette<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#017a4a"</span>,</span>
<span>                    <span class="st">"#9F248F"</span>,</span>
<span>                    <span class="st">"#FFCE4E"</span>,</span>
<span>                    <span class="st">"#244579"</span>,</span>
<span>                    <span class="st">"#c6242d"</span><span class="op">)</span>, </span>
<span>          doc_id<span class="op">=</span><span class="st">"name"</span>,</span>
<span>          index_var<span class="op">=</span><span class="st">"index"</span>,</span>
<span>          word_var<span class="op">=</span><span class="st">"word"</span>,</span>
<span>          group_var<span class="op">=</span><span class="st">"group"</span>,</span>
<span>          top_n<span class="op">=</span><span class="cn">NULL</span>, </span>
<span>          sort<span class="op">=</span><span class="cn">FALSE</span>,</span>
<span>          polar<span class="op">=</span><span class="cn">TRUE</span>, </span>
<span>          quartiles<span class="op">=</span><span class="cn">FALSE</span>, </span>
<span>          text_label<span class="op">=</span><span class="cn">NULL</span>, </span>
<span>          tooltip_values<span class="op">=</span><span class="cn">NULL</span>, </span>
<span>          tooltip_doc<span class="op">=</span><span class="st">"name"</span>,</span>
<span>          label.size<span class="op">=</span><span class="fl">1</span>,</span>
<span>          ring.col<span class="op">=</span><span class="st">"red3"</span>,</span>
<span>          line.width<span class="op">=</span><span class="fl">0.1</span>,</span>
<span>          legend.position<span class="op">=</span><span class="st">"top"</span>,</span>
<span>          legend.title<span class="op">=</span><span class="st">"Group"</span>,</span>
<span>          title<span class="op">=</span><span class="st">"Lexical Spike Plot"</span>,</span>
<span>          subtitle<span class="op">=</span><span class="st">"Keyword dispersion in texts."</span>,</span>
<span>          svg.height<span class="op">=</span><span class="fl">5</span>,</span>
<span>          svg.width<span class="op">=</span><span class="fl">6</span>,</span>
<span>          ncol<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>          nrow<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>          interactive<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data frame containing the data generated by the function filterWords to be plotted containing: the name of the document, a list of keywords retrieved, their relative position in the text (index), the group or dictionary category each keyword belongs.</p></dd>


<dt>palette</dt>
<dd><p>A vector of colors to be used in the plot to represent groups or categories.</p></dd>


<dt>doc_id</dt>
<dd><p>The name of the variable containing the document identifier. The default is "name".</p></dd>


<dt>index_var</dt>
<dd><p>The name of the variable containing the index of the word in the text. The default is "index".</p></dd>


<dt>word_var</dt>
<dd><p>The name of the variable containing the keyword found in the corpus. The default is "word".</p></dd>


<dt>group_var</dt>
<dd><p>The name of the variable containing the group. The default is "group".</p></dd>


<dt>top_n</dt>
<dd><p>The top number of documents to be plotted. The default is NULL.</p></dd>


<dt>sort</dt>
<dd><p>A logical value indicating whether the documents should be sorted by frequency of terms found. The default is FALSE.</p></dd>


<dt>polar</dt>
<dd><p>A logical value indicating whether the plot should be circular or rectangular. The default is TRUE.</p></dd>


<dt>quartiles</dt>
<dd><p>A logical value indicating whether the quartiles should be plotted. The default is FALSE.</p></dd>


<dt>text_label</dt>
<dd><p>A variable containing the text for the labeling documents. The default is NULL.</p></dd>


<dt>tooltip_values</dt>
<dd><p>A variable that displays individual values in the tooltip. The default is NULL (the values are automatically generated by the function).</p></dd>


<dt>tooltip_doc</dt>
<dd><p>A variable indicating the text to be shown in the tooltip. The default is "name".</p></dd>


<dt>label.size</dt>
<dd><p>The size of the labels.</p></dd>


<dt>ring.col</dt>
<dd><p>The color of the ring. The default is "red3".</p></dd>


<dt>line.width</dt>
<dd><p>The width of the lines. The default is 0.1.</p></dd>


<dt>legend.position</dt>
<dd><p>The position of the legend. The default is "top".</p></dd>


<dt>legend.title</dt>
<dd><p>The title of the legend. The default is "Group".</p></dd>


<dt>title</dt>
<dd><p>The title of the plot. The default is "Lexical Spike Plot".</p></dd>


<dt>subtitle</dt>
<dd><p>The subtitle of the plot. The default is "Keyword dispersion in texts."</p></dd>


<dt>svg.height</dt>
<dd><p>The height of the svg for the interactive chart. The default is 5.</p></dd>


<dt>svg.width</dt>
<dd><p>The width of the svg for the interactive chart. The default is 6.</p></dd>


<dt>ncol</dt>
<dd><p>The number of columns in the graph. The default is NULL.</p></dd>


<dt>nrow</dt>
<dd><p>The number of rows in the graph. The default is NULL.</p></dd>


<dt>interactive</dt>
<dd><p>A logical value indicating whether the plot should be interactive. The default is TRUE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function generates two types of Lexical Dispersion Plot for keywords or dictionaries categories. It represents the position of the selected keywords or dictionary categories, or metadata values in each text forming a corpus object. The default type is circular, while the alternative, rectangular, represents keyword positions linearly. The purpose is to represent a large volume of texts and to allow users to interact with the results.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A chart representing the dispersion of terms or concepts.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Aggregate the text by session from </span></span></span>
<span class="r-in"><span><span class="co"># The Spanish Parliament Speeches Corpus</span></span></span>
<span class="r-in"><span><span class="va">ag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>text<span class="op">=</span><span class="va">spa.sessions</span><span class="op">$</span><span class="va">speech.text</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>session_number<span class="op">=</span><span class="va">spa.sessions</span><span class="op">$</span><span class="va">session.number</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                <span class="va">paste</span>, </span></span>
<span class="r-in"><span>                collapse<span class="op">=</span><span class="st">"\n"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Paste zeros to the number to allow</span></span></span>
<span class="r-in"><span><span class="co"># sorting the sessions</span></span></span>
<span class="r-in"><span><span class="va">ag</span><span class="op">$</span><span class="va">session_number</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">ag</span><span class="op">$</span><span class="va">session_number</span><span class="op">)</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"00"</span>, <span class="va">ag</span><span class="op">$</span><span class="va">session_number</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">ag</span><span class="op">$</span><span class="va">session_number</span><span class="op">)</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ag</span><span class="op">$</span><span class="va">session_number</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">ag</span><span class="op">$</span><span class="va">session_number</span><span class="op">)</span><span class="op">==</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"0"</span>, <span class="va">ag</span><span class="op">$</span><span class="va">session_number</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">ag</span><span class="op">$</span><span class="va">session_number</span><span class="op">)</span><span class="op">==</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert the results into a corpus object</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://quanteda.io" class="external-link">quanteda</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/corpus.html" class="external-link">corpus</a></span><span class="op">(</span><span class="va">ag</span>, </span></span>
<span class="r-in"><span>             docid_field <span class="op">=</span> <span class="st">"session_number"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a dictionary</span></span></span>
<span class="r-in"><span><span class="va">dic</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://quanteda.io/reference/dictionary.html" class="external-link">dictionary</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Territorio<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"federal"</span>,<span class="st">"estatuto"</span>,<span class="st">"nacionalismo"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"regionalismo"</span>,<span class="st">"cataluña"</span>,<span class="st">"lengua"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       Genero<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"violencia machista"</span>,<span class="st">"mujer"</span>,<span class="st">"violencia sexual"</span>,</span></span>
<span class="r-in"><span>                <span class="st">"aborto"</span>,<span class="st">"reproductivo"</span>,<span class="st">"género"</span>,<span class="st">"trans"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       Memoria<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"memoria"</span>,<span class="st">"franquismo"</span>,<span class="st">"franquista"</span>,<span class="st">"dictadura"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       COVID<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"covid"</span>,<span class="st">"pandemia"</span>,<span class="st">"muerte"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Searche the keywords and their</span></span></span>
<span class="r-in"><span><span class="co"># position in each session</span></span></span>
<span class="r-in"><span><span class="va">ter</span> <span class="op">&lt;-</span> <span class="fu"><a href="filterWords.html">filterWords</a></span><span class="op">(</span><span class="va">cp</span>, <span class="va">dic</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define a proper description for naming</span></span></span>
<span class="r-in"><span><span class="co"># the sessions.</span></span></span>
<span class="r-in"><span><span class="va">ter</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Session "</span>, <span class="va">ter</span><span class="op">$</span><span class="va">name</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot the results</span></span></span>
<span class="r-in"><span><span class="fu">plotSpike</span><span class="op">(</span>data<span class="op">=</span><span class="va">ter</span>, </span></span>
<span class="r-in"><span>          legend.title<span class="op">=</span><span class="st">"Tema:"</span>,</span></span>
<span class="r-in"><span>          title<span class="op">=</span><span class="st">"Congreso de los Diputados - XIV Legislatura (2019-2023)"</span>,</span></span>
<span class="r-in"><span>          subtitle<span class="op">=</span><span class="st">"Territorio, género, memoria y COVID en los debates de los plenos."</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Rodrigo Rodrigues-Silveira.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

